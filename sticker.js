const barGusts = document.querySelector('#barGusts');
const colorStopsWindy = [
    {
      "color": "#F0F4F5",
      "value": 0,
      "alpha": 0.2
    },
    {
      "color": "#C6E3F5",
      "value": 2,
      "alpha": 0.2
    },
    {
      "color": "#2fdac9",
      "value": 5,
      "alpha": 0.7
    },
    {
      "color": "#20cf17",
      "value": 6,
      "alpha": 0.7
    },
    {
      "color": "#EFE31B",
      "value": 10,
      "alpha": 0.7
    },
    {
      "color": "#D48E28",
      "value": 12,
      "alpha": 0.7
    },
    {
      "color": "#FA411E",
      "value": 15,
      "alpha": 0.7
    },
    {
      "color": "#B9235A",
      "value": 17,
      "alpha": 0.9
    },
    {
      "color": "#841B8B",
      "value": 19,
      "alpha": 0.9
    },
    {
      "color": "#61238F",
      "value": 22,
      "alpha": 0.9
    },
    {
      "color": "#311248",
      "value": 25,
      "alpha": 0.9
    },
    {
      "color": "#190924",
      "value": 30,
      "alpha": 0.9
    },
    {
      "color": "#000000",
      "value": 40
    }
  ]
const apiResponse = {
    status: "success",
    response: {
      modelsUpdateTime: {
        myocean: 1696515257,
        cfs: 1696587672,
        arome: 1696599445,
        ecmwf_ens_p10: 1696592021,
        gfs_wave: 1696603722,
        uvi: 1696545998,
        openwrf: 1696606299,
        hrdps: 1696491115,
        ecmwf_ens: 1696591571,
        gfs27: 1696510680,
        mfwam: 1696595247,
        iconglobal: 1696575648,
        nam: 1696601456,
        silam: 1696597475,
        ecmwf_rain: 1696589349,
        ecmwf_ens_p90: 1696592471,
        icon_d2: 1696601408,
        ecmwf_ens_controlrun: 1696591571,
        ecmwf_ens_sd: 1696592920,
        iconeuro: 1696590288,
        ecmwf_ens_pop: 1696593026,
        lew: 1696601062,
        hrrr: 1696591025,
        openskiron: 1696597896,
        ecmwf: 1696589349,
      },
      forecastTimestamp: 1696606299,
      forecast: [
        {
          timestamp: 1696172400,
          date: "01.10.2023 15:00",
          CLOUD_BASE: 1006.2892,
          LAND: 0.710083,
          PRATE_PERIOD: 0.012885518,
          PRMSL: 101961.8,
          RH: 66.82781,
          TCDC_HIGH: 7.8386445,
          TCDC_LOW: 3.553293,
          UGRD_GFSPLUS: 9.058638,
          CWAT: 7.044077e-6,
          DPT: 282.74512,
          PRES: 101816.28,
          VGRD_GFSPLUS: -5.3049707,
          GUST_GFSPLUS: 11.206714,
          GUST: 10.077032,
          PRATE: 1.1931036e-6,
          PRES_LOW_CLOUD: 90398.14,
          TCDC_TOTAL: 12.531965,
          TMP: 288.87555,
          VGRD: -2.9053574,
          FSI: 60.66585,
          TCDC_MED: 0,
          UGRD: 7.673583,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 284.38063094588694,
          FEELS_LIKE_TMP_WIND_TO_FACE: 284.0279815073619,
          FEELS_LIKE_TMP_WIND_TO_BACK: 284.78960941161387,
        },
        {
          timestamp: 1696183200,
          date: "01.10.2023 18:00",
          PRES_LOW_CLOUD: 90398.836,
          PRMSL: 102030.66,
          UGRD: 6.7905073,
          FSI: 53.694458,
          CWAT: 0,
          DPT: 283.39682,
          PRES: 101884.81,
          TCDC_MED: 0,
          TMP: 288.2639,
          UGRD_GFSPLUS: 8.421077,
          GUST: 9.655711,
          PRATE_PERIOD: 0.01266288,
          TCDC_LOW: 1.4603287,
          PRATE: 1.172489e-6,
          TCDC_HIGH: 0,
          TCDC_TOTAL: 1.4603287,
          VGRD: -2.4582849,
          VGRD_GFSPLUS: -2.9665308,
          GUST_GFSPLUS: 10.034743,
          CLOUD_BASE: 1009.6619,
          LAND: 0.710083,
          RH: 72.59409,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 284.05094165927034,
          FEELS_LIKE_TMP_WIND_TO_FACE: 283.6733755349045,
          FEELS_LIKE_TMP_WIND_TO_BACK: 284.49804005403286,
        },
        {
          timestamp: 1696194000,
          date: "01.10.2023 21:00",
          GUST: 8.188854,
          TCDC_LOW: 1.5216856,
          UGRD: 5.940887,
          GUST_GFSPLUS: 8.301016,
          RH: 75.03791,
          TCDC_MED: 0,
          UGRD_GFSPLUS: 7.392124,
          CWAT: 0.00050935836,
          DPT: 283.7882,
          PRES: 101917.91,
          PRMSL: 102063.86,
          LAND: 0.710083,
          PRATE: 5.8675096e-6,
          TMP: 288.15723,
          FSI: 48.711166,
          VGRD: -1.634628,
          VGRD_GFSPLUS: -1.8030689,
          CLOUD_BASE: 885.35254,
          PRATE_PERIOD: 0.0633691,
          PRES_LOW_CLOUD: 91796.24,
          TCDC_HIGH: 0,
          TCDC_TOTAL: 1.5432516,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 284.22355490256916,
          FEELS_LIKE_TMP_WIND_TO_FACE: 283.8130716821136,
          FEELS_LIKE_TMP_WIND_TO_BACK: 284.72464016806833,
        },
        {
          timestamp: 1696204800,
          date: "02.10.2023 00:00",
          PRES_LOW_CLOUD: 90458.68,
          PRMSL: 102061.57,
          TCDC_TOTAL: 4.680429,
          FSI: 42.36663,
          PRES: 101915.39,
          TCDC_LOW: 4.680429,
          VGRD_GFSPLUS: -1.035354,
          DPT: 284.6277,
          LAND: 0.710083,
          PRATE_PERIOD: 0.13240978,
          TCDC_HIGH: 0,
          UGRD: 4.684166,
          GUST_GFSPLUS: 6.40354,
          UGRD_GFSPLUS: 5.9304857,
          CWAT: 0,
          GUST: 6.286976,
          PRATE: 1.2260165e-5,
          RH: 81.95332,
          TCDC_MED: 0,
          TMP: 287.678,
          VGRD: -0.729864,
          CLOUD_BASE: 1004.658,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 284.22036359588867,
          FEELS_LIKE_TMP_WIND_TO_FACE: 283.75080024309267,
          FEELS_LIKE_TMP_WIND_TO_BACK: 284.8316960314052,
        },
        {
          timestamp: 1696215600,
          date: "02.10.2023 03:00",
          TCDC_HIGH: 1.5598211,
          TCDC_LOW: 4.7640724,
          TMP: 287.4165,
          FSI: 37.66365,
          UGRD_GFSPLUS: 5.230559,
          VGRD_GFSPLUS: 3.2220411,
          CWAT: 1.967132e-5,
          PRATE: 1.2779739e-5,
          GUST_GFSPLUS: 5.703257,
          TCDC_TOTAL: 6.4560485,
          UGRD: 4.1713724,
          VGRD: 1.4217641,
          GUST: 5.6149025,
          RH: 86.161026,
          PRMSL: 102043.734,
          TCDC_MED: 0,
          LAND: 0.710083,
          PRES_LOW_CLOUD: 91285.2,
          PRES: 101898.09,
          CLOUD_BASE: 927.4575,
          DPT: 285.09253,
          PRATE_PERIOD: 0.13802119,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 284.1319438662803,
          FEELS_LIKE_TMP_WIND_TO_FACE: 283.6448941917,
          FEELS_LIKE_TMP_WIND_TO_BACK: 284.78014721069246,
        },
        {
          timestamp: 1696226400,
          date: "02.10.2023 06:00",
          UGRD: 3.037804,
          CWAT: 0,
          GUST: 5.8543196,
          PRATE: 0,
          PRATE_PERIOD: 0,
          PRES: 101882.375,
          RH: 84.99829,
          TCDC_HIGH: 75.69542,
          VGRD: 3.6725109,
          VGRD_GFSPLUS: 4.5537353,
          LAND: 0.710083,
          PRES_LOW_CLOUD: 87099.34,
          UGRD_GFSPLUS: 3.973889,
          DPT: 285.30695,
          TCDC_LOW: 6.195701,
          TCDC_MED: 0,
          TCDC_TOTAL: 75.69542,
          FSI: 37.180733,
          GUST_GFSPLUS: 6.102716,
          PRMSL: 102028.266,
          TMP: 287.83838,
          CLOUD_BASE: 1313.0453,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 284.4696433088161,
          FEELS_LIKE_TMP_WIND_TO_FACE: 284.00134261975023,
          FEELS_LIKE_TMP_WIND_TO_BACK: 285.07839943070064,
        },
        {
          timestamp: 1696237200,
          date: "02.10.2023 09:00",
          PRES_LOW_CLOUD: 89485.305,
          PRMSL: 102059.305,
          RH: 76.25782,
          CWAT: 0.031502645,
          GUST: 7.143973,
          LAND: 0.710083,
          PRATE: 0,
          PRATE_PERIOD: 0,
          TCDC_LOW: 44.776596,
          UGRD: 3.238198,
          DPT: 284.9127,
          TCDC_MED: 0,
          UGRD_GFSPLUS: 3.6737182,
          GUST_GFSPLUS: 7.700312,
          PRES: 101913.37,
          TCDC_HIGH: 90.721466,
          TMP: 289.1172,
          TCDC_TOTAL: 94.61151,
          VGRD: 4.613085,
          FSI: 44.572334,
          VGRD_GFSPLUS: 5.618467,
          CLOUD_BASE: 1098.886,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 285.43219790715165,
          FEELS_LIKE_TMP_WIND_TO_FACE: 285.00228553384994,
          FEELS_LIKE_TMP_WIND_TO_BACK: 285.9674219120066,
        },
        {
          timestamp: 1696248000,
          date: "02.10.2023 12:00",
          UGRD_GFSPLUS: 3.2876732,
          LAND: 0.710083,
          PRES_LOW_CLOUD: 87437.875,
          TCDC_TOTAL: 99.95687,
          UGRD: 2.7612343,
          RH: 71.877075,
          TCDC_HIGH: 95.77814,
          DPT: 285.66852,
          GUST: 7.1209435,
          PRATE_PERIOD: 0.025866408,
          PRMSL: 101953.875,
          VGRD: 3.329566,
          GUST_GFSPLUS: 7.513203,
          PRATE: 2.3950377e-6,
          TCDC_LOW: 97.34642,
          TCDC_MED: 89.37592,
          TMP: 290.813,
          CLOUD_BASE: 1288.5256,
          CWAT: 0.24968769,
          PRES: 101808.72,
          FSI: 49.46922,
          VGRD_GFSPLUS: 4.093076,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 287.5175515209414,
          FEELS_LIKE_TMP_WIND_TO_FACE: 287.02596034975727,
          FEELS_LIKE_TMP_WIND_TO_BACK: 288.1757182199138,
        },
        {
          timestamp: 1696258800,
          date: "02.10.2023 15:00",
          TCDC_TOTAL: 100,
          DPT: 287.95355,
          PRES: 101657.83,
          RH: 83.957184,
          TCDC_MED: 98.58532,
          UGRD: 3.542588,
          VGRD: 3.7578094,
          FSI: 45.56611,
          VGRD_GFSPLUS: 4.6308618,
          CWAT: 0.4595257,
          GUST: 9.12391,
          PRATE_PERIOD: 0.27292186,
          PRES_LOW_CLOUD: 93395.31,
          GUST_GFSPLUS: 9.918726,
          CLOUD_BASE: 727.60693,
          TCDC_LOW: 91.90155,
          LAND: 0.710083,
          PRATE: 2.5270543e-5,
          PRMSL: 101801.766,
          TCDC_HIGH: 79.23131,
          TMP: 290.78546,
          UGRD_GFSPLUS: 5.1005077,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 287.58269597920315,
          FEELS_LIKE_TMP_WIND_TO_FACE: 287.1330697052584,
          FEELS_LIKE_TMP_WIND_TO_BACK: 288.1545781827256,
        },
        {
          timestamp: 1696269600,
          date: "02.10.2023 18:00",
          PRATE: 1.0862253e-6,
          PRMSL: 101808.484,
          RH: 83.11526,
          VGRD_GFSPLUS: 5.963142,
          FSI: 46.571743,
          CLOUD_BASE: 552.48816,
          DPT: 287.66455,
          TMP: 290.5331,
          UGRD: 4.25549,
          VGRD: 5.249153,
          PRES: 101663.2,
          PRES_LOW_CLOUD: 95366.09,
          TCDC_HIGH: 95.815674,
          TCDC_LOW: 100,
          CWAT: 0.1390942,
          GUST: 10.500124,
          LAND: 0.710083,
          PRATE_PERIOD: 0.011731233,
          TCDC_MED: 14.705403,
          TCDC_TOTAL: 100,
          UGRD_GFSPLUS: 5.0117235,
          GUST_GFSPLUS: 10.718597,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 286.918200942353,
          FEELS_LIKE_TMP_WIND_TO_FACE: 286.52711664652065,
          FEELS_LIKE_TMP_WIND_TO_BACK: 287.38693117838216,
        },
        {
          timestamp: 1696280400,
          date: "02.10.2023 21:00",
          VGRD: 5.351038,
          UGRD_GFSPLUS: 3.937029,
          GUST_GFSPLUS: 10.539369,
          TCDC_TOTAL: 100,
          PRATE_PERIOD: 0.035242356,
          TCDC_LOW: 100,
          UGRD: 3.393795,
          VGRD_GFSPLUS: 6.360608,
          PRATE: 3.263181e-6,
          LAND: 0.710083,
          PRES: 101564.97,
          RH: 81.2738,
          FSI: 51.045364,
          CLOUD_BASE: 122.734184,
          CWAT: 0.11370604,
          GUST: 10.178282,
          PRES_LOW_CLOUD: 100249.47,
          PRMSL: 101709.3,
          TCDC_HIGH: 99.0596,
          TCDC_MED: 12.052665,
          TMP: 290.4411,
          DPT: 287.1893,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 286.8598141843686,
          FEELS_LIKE_TMP_WIND_TO_FACE: 286.4552893698032,
          FEELS_LIKE_TMP_WIND_TO_BACK: 287.350787508558,
        },
        {
          timestamp: 1696291200,
          date: "03.10.2023 00:00",
          GUST: 9.125786,
          TCDC_LOW: 11.407363,
          TMP: 290.50198,
          VGRD: 4.5713634,
          FSI: 45.87271,
          UGRD_GFSPLUS: 4.2183056,
          CWAT: 0.015876427,
          LAND: 0.710083,
          PRATE: 5.053767e-7,
          TCDC_MED: 25.792767,
          TCDC_TOTAL: 94.94336,
          VGRD_GFSPLUS: 5.367837,
          DPT: 287.6245,
          PRATE_PERIOD: 0.005458068,
          PRES: 101505.09,
          PRES_LOW_CLOUD: 96253.5,
          PRMSL: 101648.69,
          TCDC_HIGH: 93.61999,
          UGRD: 3.6011317,
          GUST_GFSPLUS: 9.4,
          CLOUD_BASE: 461.3533,
          RH: 83.17481,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 287.09319790107696,
          FEELS_LIKE_TMP_WIND_TO_FACE: 286.6703369819061,
          FEELS_LIKE_TMP_WIND_TO_BACK: 287.615817187149,
        },
        {
          timestamp: 1696302000,
          date: "03.10.2023 03:00",
          TCDC_LOW: 66.57942,
          FSI: 45.08142,
          UGRD_GFSPLUS: 2.8621435,
          VGRD_GFSPLUS: 6.118689,
          CWAT: 0.07135473,
          PRMSL: 101438.984,
          TCDC_HIGH: 95.65371,
          TCDC_MED: 16.944178,
          VGRD: 5.121958,
          CLOUD_BASE: 334.48602,
          PRATE_PERIOD: 0.010112288,
          PRES: 101295.69,
          PRES_LOW_CLOUD: 97515.414,
          TCDC_TOTAL: 99.33609,
          TMP: 290.77094,
          GUST_GFSPLUS: 10.533636,
          DPT: 287.33167,
          GUST: 9.411196,
          RH: 80.26288,
          UGRD: 2.6256812,
          LAND: 0.710083,
          PRATE: 9.36323e-7,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 287.3278204271377,
          FEELS_LIKE_TMP_WIND_TO_FACE: 286.9025450781039,
          FEELS_LIKE_TMP_WIND_TO_BACK: 287.8547271377274,
        },
        {
          timestamp: 1696312800,
          date: "03.10.2023 06:00",
          PRATE_PERIOD: 0,
          TCDC_HIGH: 8.708313,
          TCDC_MED: 5,
          FSI: 41.85765,
          UGRD_GFSPLUS: 3.0491138,
          CLOUD_BASE: 512.6227,
          DPT: 286.4585,
          LAND: 0.710083,
          VGRD: 6.2032504,
          GUST: 11.806,
          PRATE: 0,
          PRES_LOW_CLOUD: 95301.664,
          RH: 79.40684,
          TMP: 289.99725,
          UGRD: 2.5054455,
          CWAT: 0,
          PRES: 101125.86,
          PRMSL: 101269.67,
          TCDC_LOW: 0,
          TCDC_TOTAL: 8.708313,
          VGRD_GFSPLUS: 7.365034,
          GUST_GFSPLUS: 12.122313,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 286.2462390227403,
          FEELS_LIKE_TMP_WIND_TO_FACE: 285.85308566340365,
          FEELS_LIKE_TMP_WIND_TO_BACK: 286.7183441107092,
        },
        {
          timestamp: 1696323600,
          date: "03.10.2023 09:00",
          TCDC_HIGH: 43.847065,
          UGRD_GFSPLUS: 2.0430932,
          CLOUD_BASE: 3222.735,
          DPT: 286.01398,
          GUST: 12.681233,
          PRES_LOW_CLOUD: 68376.23,
          TMP: 292.37195,
          VGRD: 7.316637,
          FSI: 53.731384,
          GUST_GFSPLUS: 13.305072,
          LAND: 0.710083,
          PRATE_PERIOD: 0,
          TCDC_LOW: 0,
          TCDC_MED: 3.4433148,
          RH: 66.8246,
          TCDC_TOTAL: 51.24407,
          UGRD: 1.750486,
          VGRD_GFSPLUS: 8.184414,
          CWAT: 0.0134281535,
          PRATE: 0,
          PRES: 100922.766,
          PRMSL: 101065.41,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 288.35855526297433,
          FEELS_LIKE_TMP_WIND_TO_FACE: 287.98911758707175,
          FEELS_LIKE_TMP_WIND_TO_BACK: 288.7929789718111,
        },
        {
          timestamp: 1696334400,
          date: "03.10.2023 12:00",
          CWAT: 0.061294366,
          DPT: 285.9068,
          LAND: 0.710083,
          TCDC_LOW: 0,
          UGRD: 2.176021,
          FSI: 72.196915,
          GUST_GFSPLUS: 16.60261,
          GUST: 15.662012,
          TMP: 294.85205,
          PRATE: 0,
          PRATE_PERIOD: 0,
          PRES_LOW_CLOUD: 68376.484,
          TCDC_HIGH: 98.97409,
          VGRD_GFSPLUS: 9.120012,
          PRES: 100525.67,
          PRMSL: 100666.984,
          RH: 56.95928,
          TCDC_MED: 97.56495,
          TCDC_TOTAL: 100,
          VGRD: 8.415744,
          UGRD_GFSPLUS: 2.8280005,
          CLOUD_BASE: 3218.3816,
          SNOW_PRATE: 0,
          FEELS_LIKE_TMP: 290.6067968693366,
          FEELS_LIKE_TMP_WIND_TO_FACE: 290.26495946380226,
          FEELS_LIKE_TMP_WIND_TO_BACK: 290.9998758072385,
        },
      ],
      available_models: [
        "gfs27",
        "gfs27_long",
        "ecmwf",
        "ecmwf_ens",
        "iconeuro",
        "iconglobal",
        "uvi",
        "cfs",
        "icon_d2",
        "silam",
        "gfs_wave",
      ],
      model_match_rates: [],
      timezone: "Europe/Kaliningrad",
    },
    time: 0.0021669864654541016,
  };
  const gusts = [];
  apiResponse.response.forecast.forEach((item) => {
    gusts.push(item.GUST);
  });
//   function createGradient(values, colorStops) {
//     // Sort the color stops by value in ascending order
//     colorStops.sort((a, b) => a.value - b.value);
  
//     const canvas = document.createElement('canvas');
//     canvas.width = values.length;
//     canvas.height = 1;
//     const ctx = canvas.getContext('2d');
  
//     const gradient = ctx.createLinearGradient(0, 0, values.length, 0);
  
//     for (let i = 0; i < values.length; i++) {
//       const value = values[i];
//       let color;
//       let alpha = 1;
  
//       // Find the color stop with the highest value that is less than or equal to the current value
//       for (const stop of colorStops) {
//         if (stop.value <= value) {
//           color = stop.color;
//           alpha = stop.alpha || 1;
//         } else {
//           break;
//         }
//       }
  
//       ctx.fillStyle = color;
//       ctx.globalAlpha = alpha;
//       ctx.fillRect(i, 0, 1, 1);
  
//       gradient.addColorStop(i / (values.length - 1), color);
//     }
//     const gradientString = `linear-gradient(to right, ${colorStops
//         .map(stop => `${stop.color} ${stop.value}%`)
//         .join(', ')})`;
    
//       return gradientString;
//   }
function createGradient(values, colorStops) {
    // Sort the color stops by value in ascending order
    colorStops.sort((a, b) => a.value - b.value);
  
    const stopInterval = 100 / (values.length - 1);
    const gradientStops = values.map((value, index) => {
      for (let i = 0; i < colorStops.length; i++) {
        const stop = colorStops[i];
        if (value <= stop.value) {
          return `${stop.color} ${index * stopInterval}%`;
        }
      }
    });
  
    return `linear-gradient(to right, ${gradientStops.join(', ')})`;
  }
  
  const testGustsGradient = createGradient(gusts, colorStopsWindy);
  console.log(testGustsGradient);
  barGusts.style.background = testGustsGradient;